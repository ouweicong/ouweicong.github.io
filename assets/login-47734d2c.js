import{aO as e}from"./index-28412557.js";import{h as s,j as t}from"./user-9b1b9132.js";import{u as o}from"./user-c740f065.js";function a(e){return s.request("post","/system/user",{data:e})}function r(a,r,n){(function(e,t){const o={account:e,password:t};return s.request("post","/login",{data:o})})(a,r).then((async s=>{const c=s.data.expires,i=new Date;i.setTime(i.getTime()+60*c*60*1e3);const u=s.data.token;e.set("access_token",u,{expires:i}),localStorage.setItem("userInfo",JSON.stringify(s.data.user)),o().setUser(s.data.user),n?localStorage.setItem("pw",JSON.stringify({account:a,password:r})):localStorage.removeItem("pw"),window.$router.value.push("/"),t.closeAll(),t.success("🌞登陆成功~欢迎~❤️")})).catch((e=>{t.error(e.msg)}))}function n(){!function(){const s=e.get();s&&Object.keys(s).forEach((s=>{e.remove(s)}));localStorage.clear(),sessionStorage.clear()}(),location.reload()}export{r as a,n as l,a as r};
